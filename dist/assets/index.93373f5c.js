import{d as e,h as t,b as a,D as l,r as n,a1 as s,o,c as r,a as i,z as d,B as u,t as c,U as p,w as m,p as v,g as f}from"./vendor.c84fc116.js";import{c as h}from"./clipboard.a4f55480.js";import{s as g}from"./index.76d60256.js";import{_ as y}from"./index.8d3c693e.js";const b="@@wavesContext";function w(e,t){function a(a){const l=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";const e=s.getBoundingClientRect();let t=s.querySelector(".waves-ripple");switch(t?t.className="waves-ripple":(t=document.createElement("span"),t.className="waves-ripple",t.style.height=t.style.width=Math.max(e.width,e.height)+"px",s.appendChild(t)),n.type){case"center":t.style.top=e.height/2-t.offsetHeight/2+"px",t.style.left=e.width/2-t.offsetWidth/2+"px";break;default:t.style.top=(a.pageY-e.top-t.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",t.style.left=(a.pageX-e.left-t.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return t.style.backgroundColor=n.color,t.className="waves-ripple z-active",!1}}return e[b]?e[b].removeHandle=a:e[b]={removeHandle:a},a}var _={beforeMount(e,t){e.addEventListener("click",w(e,t),!1)},beforeUpdate(e,t){e.removeEventListener("click",e[b].removeHandle,!1),e.addEventListener("click",w(e,t),!1)},unmounted(e){e.removeEventListener("click",e[b].removeHandle,!1),e[b]=null,delete e[b]}};const x={beforeMount:function(e,t,a){if("function"!=typeof t.value)throw"callback must be a function";let l=null,n=e=>{"click"===e.type&&0!==e.button||null===l&&(l=setTimeout((()=>{o()}),1e3))},s=e=>{null!==l&&(clearTimeout(l),l=null)};const o=e=>{t.value(e)};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n),e.addEventListener("click",s),e.addEventListener("mouseout",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s)},updated(e,{value:t}){e.$value=t},unmounted(e){e.removeEventListener("click",e.handler)}},k={created:function(e,t){let a;e.addEventListener("click",(()=>{a&&clearTimeout(a),a=setTimeout((()=>{t.value()}),1e3)}))}};const C={beforeMount:function(e,t){!function(e,t,a,l){var n=document.createElement("canvas");t.appendChild(n),n.width=200,n.height=150,n.style.display="none";var s=n.getContext("2d");s.rotate(-20*Math.PI/180),s.font=a||"16px Microsoft JhengHei",s.fillStyle=l||"rgba(180, 180, 180, 0.3)",s.textAlign="left",s.textBaseline="Middle",s.fillText(e,n.width/10,n.height/2),t.style.backgroundImage="url("+n.toDataURL("image/png")+")"}(t.value.text,e,t.value.font,t.value.textColor)}},E={created:function(e){e.style.cursor="move",e.onmousedown=function(t){let a=t.pageX-e.offsetLeft,l=t.pageY-e.offsetTop;document.onmousemove=function(t){let n=t.pageX-a,s=t.pageY-l,o=document.body.clientWidth-parseInt(window.getComputedStyle(e).width),r=document.body.clientHeight-parseInt(window.getComputedStyle(e).height);n<0?n=0:n>o&&(n=o),s<0?s=0:s>r&&(s=r),e.style.left=n+"px",e.style.top=s+"px"},document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}}},L={mounted:function(e,t){const{value:a}=t,l=g&&g.getters.directivePermission;if(!(a&&a instanceof Array))throw new Error("权限指令错误，可参考 v-permission=\"['admin','editor']\"");if(a.length>0){const t=a;l.some((e=>t.includes(e)))||e.parentNode&&e.parentNode.removeChild(e)}}};const{ElMessage:M}=p,P=e({name:"Directive",directives:{copy:h,waves:_,longpress:x,dobounce:k,waterMarker:C,draggable:E,permission:L},components:{PageLayout:y},setup(){const e=t(""),n=a(),s=t([]),o=t(0);return{clipboardSuccess:()=>{M.success("复制成功")},clipboardError:()=>{M.error("复制失败")},longPressClick:()=>{M.error("你按疼我了...")},debounceClick:()=>{M.warning("嗯，你说的都对。。。")},togglePermission:()=>{return e=this,t=null,a=function*(){o.value++,o.value>2&&(o.value=0),s.value=["admin","editor","user"].splice(o.value,1),yield n.dispatch("permission/setDirectivePermission",l(s))},new Promise(((l,n)=>{var s=e=>{try{r(a.next(e))}catch(t){n(t)}},o=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,o);r((a=a.apply(e,t)).next())}));var e,t,a},currentRole:s,currentRoleIndex:o,value:e}}}),H=m();v("data-v-1faf7bf2");const S=i("ul",{style:{"padding-left":"15px"}},[i("li",null,"在Canvas上创建、填充图形（包括图片、文字、规则图形和复杂路径组成图形）。"),i("li",null,"给图形填充渐变颜色。"),i("li",null,"组合图形（包括组合图形、图形文字、图片等）。"),i("li",null,"设置图形动画集用户交互。"),i("li",null,"生成JSON, SVG数据等。"),i("li",null,"生成Canvas对象自带拖拉拽功能。")],-1),T={class:"section-container "},j=i("div",{class:"card-header"},[i("span",null,"复制 v-copy")],-1),z={class:"h50"},I=u(" 复制 "),N=i("div",{class:"card-header"},[i("span",null,"水波纹动效 v-waves")],-1),R={class:"h50"},V=u(" 点我点我快点我 "),D=i("div",{class:"card-header"},[i("span",null,"长按指令 v-longpress")],-1),U={class:"h50"},B=u(" 长按我1s以上 "),O=i("div",{class:"card-header"},[i("span",null,"防抖指令 v-dobounce")],-1),W={class:"h50"},X=u(" 点我看看 "),Y=i("div",{class:"card-header"},[i("span",null,"水印 v-waterMarker")],-1),A={class:"water-marker h200"},J=i("div",{class:"card-header"},[i("span",null,"拖拽指令 v-draggable")],-1),q={class:"drag-container h200"},G={class:"drag-box"},$=i("div",{class:"card-header"},[i("span",null,"权限指令 v-permission")],-1),F=u(" 切换权限 "),K={class:"item"},Q=u(" 有权限 admin "),Z={class:"item"},ee=u(" 有权限 editor "),te={class:"item"},ae=u(" 有权限 admin + editor"),le={class:"item"},ne=u(" 有权限 user"),se=i("div",{class:"card-header"},[i("span",null,"coming soon")],-1),oe=i("div",{class:"h50"}," 即将推出一些其他常用指令，如懒加载等 ",-1);f();const re=H(((e,t,a,l,p,m)=>{const v=n("el-input"),f=n("el-col"),h=n("el-button"),g=n("el-row"),y=n("el-card"),b=n("el-tag"),w=n("page-layout"),_=s("copy"),x=s("waves"),k=s("longpress"),C=s("dobounce"),E=s("waterMarker"),L=s("draggable"),M=s("permission");return o(),r(w,{title:"自定义指令",subtitle:"非常实用的Vue自定义指令"},{head:H((()=>[S])),body:H((()=>[i("div",T,[i(g,{gutter:25},{default:H((()=>[i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[j])),default:H((()=>[i("div",z,[i(g,{gutter:10},{default:H((()=>[i(f,{span:18},{default:H((()=>[i(v,{placeholder:"请输入",modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t)},null,8,["modelValue"])])),_:1}),i(f,{span:6},{default:H((()=>[d(i(h,{type:"primary"},{default:H((()=>[I])),_:1},512),[[_,e.value,"copy"],[_,e.clipboardSuccess,"success"],[_,e.clipboardError,"error"]])])),_:1})])),_:1})])])),_:1})])),_:1}),i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[N])),default:H((()=>[i("div",R,[d(i(h,{type:"primary"},{default:H((()=>[V])),_:1},512),[[x]])])])),_:1})])),_:1}),i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[D])),default:H((()=>[i("div",U,[d(i(h,{type:"primary"},{default:H((()=>[B])),_:1},512),[[k,e.longPressClick]])])])),_:1})])),_:1}),i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[O])),default:H((()=>[i("div",W,[d(i(h,{type:"primary"},{default:H((()=>[X])),_:1},512),[[C,e.debounceClick]])])])),_:1})])),_:1}),i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[Y])),default:H((()=>[d(i("div",A,null,512),[[E,{text:"小灰灰版权所有",textColor:"rgba(239,53,54,0.4)"}]])])),_:1})])),_:1}),i(f,{span:12},{default:H((()=>[i(y,null,{header:H((()=>[J])),default:H((()=>[i("div",q,[d(i("div",G,null,512),[[L]])])])),_:1})])),_:1}),i(f,{span:24},{default:H((()=>[i(y,null,{header:H((()=>[$])),default:H((()=>[i(h,{style:{margin:"10px 0"},type:"primary",onClick:e.togglePermission,size:"mini"},{default:H((()=>[F])),_:1},8,["onClick"]),(o(),r("div",{key:e.currentRoleIndex},[i(b,{class:"permission-sourceCode",type:"info"},{default:H((()=>[u(" 当前权限 ："+c(e.currentRole.join("_")),1)])),_:1}),i("div",K,[d(i(h,{type:"success",size:"mini"},{default:H((()=>[Q])),_:1},512),[[M,["admin"]]])]),i("div",Z,[d(i(h,{type:"warning",size:"mini"},{default:H((()=>[ee])),_:1},512),[[M,["editor"]]])]),i("div",te,[d(i(h,{type:"danger",size:"mini"},{default:H((()=>[ae])),_:1},512),[[M,["admin","editor"]]])]),i("div",le,[d(i(h,{type:"primary",size:"mini"},{default:H((()=>[ne])),_:1},512),[[M,["user"]]])])]))])),_:1})])),_:1}),i(f,{span:24},{default:H((()=>[i(y,null,{header:H((()=>[se])),default:H((()=>[oe])),_:1})])),_:1})])),_:1})])])),_:1})}));P.render=re,P.__scopeId="data-v-1faf7bf2";export default P;
