import{d as e,h as t,b as l,D as a,r as n,a0 as s,o,c as i,a as r,z as d,B as u,t as c,w as p,p as m,g as v}from"./vendor.9e636dcb.js";import{c as f}from"./clipboard.5cdcd066.js";import{s as h}from"./index.bea625f4.js";import{_ as g}from"./index.a1f412bc.js";const y="@@wavesContext";function b(e,t){function l(l){const a=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";const e=s.getBoundingClientRect();let t=s.querySelector(".waves-ripple");switch(t?t.className="waves-ripple":(t=document.createElement("span"),t.className="waves-ripple",t.style.height=t.style.width=Math.max(e.width,e.height)+"px",s.appendChild(t)),n.type){case"center":t.style.top=e.height/2-t.offsetHeight/2+"px",t.style.left=e.width/2-t.offsetWidth/2+"px";break;default:t.style.top=(l.pageY-e.top-t.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",t.style.left=(l.pageX-e.left-t.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return t.style.backgroundColor=n.color,t.className="waves-ripple z-active",!1}}return e[y]?e[y].removeHandle=l:e[y]={removeHandle:l},l}const _=e({name:"Copy",directives:{copy:f,waves:{beforeMount(e,t){e.addEventListener("click",b(e,t),!1)},beforeUpdate(e,t){e.removeEventListener("click",e[y].removeHandle,!1),e.addEventListener("click",b(e,t),!1)},unmounted(e){e.removeEventListener("click",e[y].removeHandle,!1),e[y]=null,delete e[y]}},longpress:{beforeMount:function(e,t,l){if("function"!=typeof t.value)throw"callback must be a function";let a=null,n=e=>{"click"===e.type&&0!==e.button||null===a&&(a=setTimeout((()=>{o()}),1e3))},s=e=>{null!==a&&(clearTimeout(a),a=null)};const o=e=>{t.value(e)};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n),e.addEventListener("click",s),e.addEventListener("mouseout",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s)},updated(e,{value:t}){e.$value=t},unmounted(e){e.removeEventListener("click",e.handler)}},dobounce:{created:function(e,t){let l;e.addEventListener("click",(()=>{l&&clearTimeout(l),l=setTimeout((()=>{t.value()}),1e3)}))}},waterMarker:{beforeMount:function(e,t){!function(e,t,l,a){var n=document.createElement("canvas");t.appendChild(n),n.width=200,n.height=150,n.style.display="none";var s=n.getContext("2d");s.rotate(-20*Math.PI/180),s.font=l||"16px Microsoft JhengHei",s.fillStyle=a||"rgba(180, 180, 180, 0.3)",s.textAlign="left",s.textBaseline="Middle",s.fillText(e,n.width/10,n.height/2),t.style.backgroundImage="url("+n.toDataURL("image/png")+")"}(t.value.text,e,t.value.font,t.value.textColor)}},draggable:{created:function(e){e.style.cursor="move",e.onmousedown=function(t){let l=t.pageX-e.offsetLeft,a=t.pageY-e.offsetTop;document.onmousemove=function(t){let n=t.pageX-l,s=t.pageY-a,o=document.body.clientWidth-parseInt(window.getComputedStyle(e).width),i=document.body.clientHeight-parseInt(window.getComputedStyle(e).height);n<0?n=0:n>o&&(n=o),s<0?s=0:s>i&&(s=i),e.style.left=n+"px",e.style.top=s+"px"},document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}}},permission:{mounted:function(e,t){const{value:l}=t,a=h&&h.getters.directivePermission;if(!(l&&l instanceof Array))throw new Error("权限指令错误，可参考 v-permission=\"['admin','editor']\"");if(l.length>0){const t=l;a.some((e=>t.includes(e)))||e.parentNode&&e.parentNode.removeChild(e)}}}},components:{PageLayout:g},setup(){const e=t(""),n=l(),s=t([]),o=t(0);return{clipboardSuccess:()=>{},clipboardError:()=>{},longPressClick:()=>{},debounceClick:()=>{},togglePermission:()=>{return e=this,t=null,l=function*(){o.value++,o.value>2&&(o.value=0),s.value=["admin","editor","user"].splice(o.value,1),yield n.dispatch("permission/setDirectivePermission",a(s))},new Promise(((a,n)=>{var s=e=>{try{i(l.next(e))}catch(t){n(t)}},o=e=>{try{i(l.throw(e))}catch(t){n(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((l=l.apply(e,t)).next())}));var e,t,l},currentRole:s,currentRoleIndex:o,value:e}}}),w=p();m("data-v-0592404e");const x=r("ul",{style:{"padding-left":"15px"}},[r("li",null,"在Canvas上创建、填充图形（包括图片、文字、规则图形和复杂路径组成图形）。"),r("li",null,"给图形填充渐变颜色。"),r("li",null,"组合图形（包括组合图形、图形文字、图片等）。"),r("li",null,"设置图形动画集用户交互。"),r("li",null,"生成JSON, SVG数据等。"),r("li",null,"生成Canvas对象自带拖拉拽功能。")],-1),k={class:"section-container "},C=r("div",{class:"card-header"},[r("span",null,"复制 v-copy")],-1),E={class:"h50"},L=u(" 复制 "),M=r("div",{class:"card-header"},[r("span",null,"水波纹动效 v-waves")],-1),P={class:"h50"},H=u(" 点我点我快点我 "),S=r("div",{class:"card-header"},[r("span",null,"长按指令 v-longpress")],-1),T={class:"h50"},j=u(" 长按我1s以上 "),z=r("div",{class:"card-header"},[r("span",null,"防抖指令 v-dobounce")],-1),I={class:"h50"},N=u(" 点我看看 "),R=r("div",{class:"card-header"},[r("span",null,"水印 v-waterMarker")],-1),V={class:"water-marker h200"},B=r("div",{class:"card-header"},[r("span",null,"拖拽指令 v-draggable")],-1),D={class:"drag-container h200"},O={class:"drag-box"},U=r("div",{class:"card-header"},[r("span",null,"权限指令 v-permission")],-1),W=u(" 切换权限 "),X={class:"item"},Y=u(" 有权限 admin "),A={class:"item"},J=u(" 有权限 editor "),q={class:"item"},G=u(" 有权限 admin + editor"),$={class:"item"},F=u(" 有权限 user"),K=r("div",{class:"card-header"},[r("span",null,"coming soon")],-1),Q=r("div",{class:"h50"}," 即将推出一些其他常用指令，如懒加载等 ",-1);v();const Z=w(((e,t,l,a,p,m)=>{const v=n("el-input"),f=n("el-col"),h=n("el-button"),g=n("el-row"),y=n("el-card"),b=n("el-tag"),_=n("page-layout"),Z=s("copy"),ee=s("waves"),te=s("longpress"),le=s("dobounce"),ae=s("waterMarker"),ne=s("draggable"),se=s("permission");return o(),i(_,{title:"自定义指令",subtitle:"非常实用的Vue自定义指令"},{head:w((()=>[x])),body:w((()=>[r("div",k,[r(g,{gutter:25},{default:w((()=>[r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[C])),default:w((()=>[r("div",E,[r(g,{gutter:10},{default:w((()=>[r(f,{span:18},{default:w((()=>[r(v,{placeholder:"请输入",modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t)},null,8,["modelValue"])])),_:1}),r(f,{span:6},{default:w((()=>[d(r(h,{type:"primary"},{default:w((()=>[L])),_:1},512),[[Z,e.value,"copy"],[Z,e.clipboardSuccess,"success"],[Z,e.clipboardError,"error"]])])),_:1})])),_:1})])])),_:1})])),_:1}),r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[M])),default:w((()=>[r("div",P,[d(r(h,{type:"primary"},{default:w((()=>[H])),_:1},512),[[ee]])])])),_:1})])),_:1}),r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[S])),default:w((()=>[r("div",T,[d(r(h,{type:"primary"},{default:w((()=>[j])),_:1},512),[[te,e.longPressClick]])])])),_:1})])),_:1}),r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[z])),default:w((()=>[r("div",I,[d(r(h,{type:"primary"},{default:w((()=>[N])),_:1},512),[[le,e.debounceClick]])])])),_:1})])),_:1}),r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[R])),default:w((()=>[d(r("div",V,null,512),[[ae,{text:"小灰灰版权所有",textColor:"rgba(239,53,54,0.4)"}]])])),_:1})])),_:1}),r(f,{span:12},{default:w((()=>[r(y,null,{header:w((()=>[B])),default:w((()=>[r("div",D,[d(r("div",O,null,512),[[ne]])])])),_:1})])),_:1}),r(f,{span:24},{default:w((()=>[r(y,null,{header:w((()=>[U])),default:w((()=>[r(h,{style:{margin:"10px 0"},type:"primary",onClick:e.togglePermission,size:"mini"},{default:w((()=>[W])),_:1},8,["onClick"]),(o(),i("div",{key:e.currentRoleIndex},[r(b,{class:"permission-sourceCode",type:"info"},{default:w((()=>[u(" 当前权限 ："+c(e.currentRole.join("_")),1)])),_:1}),r("div",X,[d(r(h,{type:"success",size:"mini"},{default:w((()=>[Y])),_:1},512),[[se,["admin"]]])]),r("div",A,[d(r(h,{type:"warning",size:"mini"},{default:w((()=>[J])),_:1},512),[[se,["editor"]]])]),r("div",q,[d(r(h,{type:"danger",size:"mini"},{default:w((()=>[G])),_:1},512),[[se,["admin","editor"]]])]),r("div",$,[d(r(h,{type:"primary",size:"mini"},{default:w((()=>[F])),_:1},512),[[se,["user"]]])])]))])),_:1})])),_:1}),r(f,{span:24},{default:w((()=>[r(y,null,{header:w((()=>[K])),default:w((()=>[Q])),_:1})])),_:1})])),_:1})])])),_:1})}));_.render=Z,_.__scopeId="data-v-0592404e";export default _;
