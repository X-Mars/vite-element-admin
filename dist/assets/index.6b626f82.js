import{d as e,h as t,e as a,p as l,f as n,_ as s,D as o,r,a3 as i,o as d,c as u,a as c,z as p,B as m,t as v,w as f}from"./vendor.b1565cd9.js";import{s as h}from"./index.adea8d68.js";import{c as g}from"./clipboard.ea999d3b.js";import{_ as y}from"./index.f0259f49.js";const b="@@wavesContext";function _(e,t){function a(a){const l=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";const e=s.getBoundingClientRect();let t=s.querySelector(".waves-ripple");switch(t?t.className="waves-ripple":(t=document.createElement("span"),t.className="waves-ripple",t.style.height=t.style.width=Math.max(e.width,e.height)+"px",s.appendChild(t)),n.type){case"center":t.style.top=e.height/2-t.offsetHeight/2+"px",t.style.left=e.width/2-t.offsetWidth/2+"px";break;default:t.style.top=(a.pageY-e.top-t.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",t.style.left=(a.pageX-e.left-t.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return t.style.backgroundColor=n.color,t.className="waves-ripple z-active",!1}}return e[b]?e[b].removeHandle=a:e[b]={removeHandle:a},a}const w=e({name:"Copy",directives:{copy:g,waves:{beforeMount(e,t){e.addEventListener("click",_(e,t),!1)},beforeUpdate(e,t){e.removeEventListener("click",e[b].removeHandle,!1),e.addEventListener("click",_(e,t),!1)},unmounted(e){e.removeEventListener("click",e[b].removeHandle,!1),e[b]=null,delete e[b]}},longpress:{beforeMount:function(e,t,a){if("function"!=typeof t.value)throw"callback must be a function";let l=null,n=e=>{"click"===e.type&&0!==e.button||null===l&&(l=setTimeout((()=>{o()}),1e3))},s=e=>{null!==l&&(clearTimeout(l),l=null)};const o=e=>{t.value(e)};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n),e.addEventListener("click",s),e.addEventListener("mouseout",s),e.addEventListener("touchend",s),e.addEventListener("touchcancel",s)},updated(e,{value:t}){e.$value=t},unmounted(e){e.removeEventListener("click",e.handler)}},dobounce:{created:function(e,t){let a;e.addEventListener("click",(()=>{a&&clearTimeout(a),a=setTimeout((()=>{t.value()}),1e3)}))}},waterMarker:{beforeMount:function(e,t){!function(e,t,a,l){var n=document.createElement("canvas");t.appendChild(n),n.width=200,n.height=150,n.style.display="none";var s=n.getContext("2d");s.rotate(-20*Math.PI/180),s.font=a||"16px Microsoft JhengHei",s.fillStyle=l||"rgba(180, 180, 180, 0.3)",s.textAlign="left",s.textBaseline="Middle",s.fillText(e,n.width/10,n.height/2),t.style.backgroundImage="url("+n.toDataURL("image/png")+")"}(t.value.text,e,t.value.font,t.value.textColor)}},draggable:{created:function(e){e.style.cursor="move",e.onmousedown=function(t){let a=t.pageX-e.offsetLeft,l=t.pageY-e.offsetTop;document.onmousemove=function(t){let n=t.pageX-a,s=t.pageY-l,o=document.body.clientWidth-parseInt(window.getComputedStyle(e).width),r=document.body.clientHeight-parseInt(window.getComputedStyle(e).height);n<0?n=0:n>o&&(n=o),s<0?s=0:s>r&&(s=r),e.style.left=n+"px",e.style.top=s+"px"},document.onmouseup=function(){document.onmousemove=document.onmouseup=null}}}},permission:{mounted:function(e,t){const{value:a}=t,l=h&&h.getters.directivePermission;if(!(a&&a instanceof Array))throw new Error("权限指令错误，可参考 v-permission=\"['admin','editor']\"");if(a.length>0){const t=a;l.some((e=>t.includes(e)))||e.parentNode&&e.parentNode.removeChild(e)}}}},components:{PageLayout:y},setup(){const e=t(""),l=a(),n=t([]),r=t(0);return{clipboardSuccess:()=>{s.success("复制成功")},clipboardError:()=>{s.error("复制失败")},longPressClick:()=>{s.error("你按疼我了...")},debounceClick:()=>{s.warning("嗯，你说的都对。。。")},togglePermission:()=>{return e=this,t=null,a=function*(){r.value++,r.value>2&&(r.value=0),n.value=["admin","editor","user"].splice(r.value,1),yield l.dispatch("permission/setDirectivePermission",o(n))},new Promise(((l,n)=>{var s=e=>{try{r(a.next(e))}catch(t){n(t)}},o=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,o);r((a=a.apply(e,t)).next())}));var e,t,a},currentRole:n,currentRoleIndex:r,value:e}}}),x=f();l("data-v-45471ae5");const k=c("ul",{style:{"padding-left":"15px"}},[c("li",null,"在Canvas上创建、填充图形（包括图片、文字、规则图形和复杂路径组成图形）。"),c("li",null,"给图形填充渐变颜色。"),c("li",null,"组合图形（包括组合图形、图形文字、图片等）。"),c("li",null,"设置图形动画集用户交互。"),c("li",null,"生成JSON, SVG数据等。"),c("li",null,"生成Canvas对象自带拖拉拽功能。")],-1),C={class:"section-container "},E=c("div",{class:"card-header"},[c("span",null,"复制 v-copy")],-1),L={class:"h50"},M=m(" 复制 "),P=c("div",{class:"card-header"},[c("span",null,"水波纹动效 v-waves")],-1),H={class:"h50"},S=m(" 点我点我快点我 "),T=c("div",{class:"card-header"},[c("span",null,"长按指令 v-longpress")],-1),j={class:"h50"},z=m(" 长按我1s以上 "),I=c("div",{class:"card-header"},[c("span",null,"防抖指令 v-dobounce")],-1),N={class:"h50"},R=m(" 点我看看 "),V=c("div",{class:"card-header"},[c("span",null,"水印 v-waterMarker")],-1),B={class:"water-marker h200"},D=c("div",{class:"card-header"},[c("span",null,"拖拽指令 v-draggable")],-1),O={class:"drag-container h200"},U={class:"drag-box"},W=c("div",{class:"card-header"},[c("span",null,"权限指令 v-permission")],-1),X=m(" 切换权限 "),Y={class:"item"},A=m(" 有权限 admin "),J={class:"item"},q=m(" 有权限 editor "),G={class:"item"},$=m(" 有权限 admin + editor"),F={class:"item"},K=m(" 有权限 user"),Q=c("div",{class:"card-header"},[c("span",null,"coming soon")],-1),Z=c("div",{class:"h50"}," 即将推出一些其他常用指令，如懒加载等 ",-1);n();const ee=x(((e,t,a,l,n,s)=>{const o=r("el-input"),f=r("el-col"),h=r("el-button"),g=r("el-row"),y=r("el-card"),b=r("el-tag"),_=r("page-layout"),w=i("copy"),ee=i("waves"),te=i("longpress"),ae=i("dobounce"),le=i("waterMarker"),ne=i("draggable"),se=i("permission");return d(),u(_,{title:"自定义指令",subtitle:"非常实用的Vue自定义指令"},{head:x((()=>[k])),body:x((()=>[c("div",C,[c(g,{gutter:25},{default:x((()=>[c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[E])),default:x((()=>[c("div",L,[c(g,{gutter:10},{default:x((()=>[c(f,{span:18},{default:x((()=>[c(o,{placeholder:"请输入",modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=t=>e.value=t)},null,8,["modelValue"])])),_:1}),c(f,{span:6},{default:x((()=>[p(c(h,{type:"primary"},{default:x((()=>[M])),_:1},512),[[w,e.value,"copy"],[w,e.clipboardSuccess,"success"],[w,e.clipboardError,"error"]])])),_:1})])),_:1})])])),_:1})])),_:1}),c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[P])),default:x((()=>[c("div",H,[p(c(h,{type:"primary"},{default:x((()=>[S])),_:1},512),[[ee]])])])),_:1})])),_:1}),c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[T])),default:x((()=>[c("div",j,[p(c(h,{type:"primary"},{default:x((()=>[z])),_:1},512),[[te,e.longPressClick]])])])),_:1})])),_:1}),c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[I])),default:x((()=>[c("div",N,[p(c(h,{type:"primary"},{default:x((()=>[R])),_:1},512),[[ae,e.debounceClick]])])])),_:1})])),_:1}),c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[V])),default:x((()=>[p(c("div",B,null,512),[[le,{text:"小灰灰版权所有",textColor:"rgba(239,53,54,0.4)"}]])])),_:1})])),_:1}),c(f,{span:12},{default:x((()=>[c(y,null,{header:x((()=>[D])),default:x((()=>[c("div",O,[p(c("div",U,null,512),[[ne]])])])),_:1})])),_:1}),c(f,{span:24},{default:x((()=>[c(y,null,{header:x((()=>[W])),default:x((()=>[c(h,{style:{margin:"10px 0"},type:"primary",onClick:e.togglePermission,size:"mini"},{default:x((()=>[X])),_:1},8,["onClick"]),(d(),u("div",{key:e.currentRoleIndex},[c(b,{class:"permission-sourceCode",type:"info"},{default:x((()=>[m(" 当前权限 ："+v(e.currentRole.join("_")),1)])),_:1}),c("div",Y,[p(c(h,{type:"success",size:"mini"},{default:x((()=>[A])),_:1},512),[[se,["admin"]]])]),c("div",J,[p(c(h,{type:"warning",size:"mini"},{default:x((()=>[q])),_:1},512),[[se,["editor"]]])]),c("div",G,[p(c(h,{type:"danger",size:"mini"},{default:x((()=>[$])),_:1},512),[[se,["admin","editor"]]])]),c("div",F,[p(c(h,{type:"primary",size:"mini"},{default:x((()=>[K])),_:1},512),[[se,["user"]]])])]))])),_:1})])),_:1}),c(f,{span:24},{default:x((()=>[c(y,null,{header:x((()=>[Q])),default:x((()=>[Z])),_:1})])),_:1})])),_:1})])])),_:1})}));w.render=ee,w.__scopeId="data-v-45471ae5";export default w;
